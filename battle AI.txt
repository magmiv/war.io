1) Отряды двигаются, пока не достигнут противника.Затем начинается AI
Если во время боя солдатам была дана команда - идти в нужную точку и отстреливаться одновременно
2) Для каждого солдата выссчитываем солдата для стрельбы и стреляем в него раз в секунду. Если солдата больше нет - выбрать другого солдата
3) Если так получилось, что солдат не найден - просто двигаться к ближайшуму врагу  (в пределах дистанции стрельбы * 3), переодически 
проверяя дистанцию от основного отряда и вражеский массив на предмет наличия в нем врагов ближе
Реализовать пероверку ккординат между солдатами во время стрльбы, так как краг может убегать

В переводе на код:
Если расстояние между отрядами в два раза больше, чем его дистанция стрельбы - значит отряды рядом. 
Если у отряда нет движения, то для каждого солдата выбираем противника в подошедшем отряде и начинаем движение. 